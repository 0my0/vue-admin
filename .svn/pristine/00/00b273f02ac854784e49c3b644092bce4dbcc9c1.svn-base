{"remainingRequest":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js!E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\vueProject\\admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vueProject\\admin\\vue-element-admin\\src\\views\\system-manager\\currency-exchange-rate.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vueProject\\admin\\vue-element-admin\\src\\views\\system-manager\\currency-exchange-rate.vue","mtime":1577687701009},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"E:\\\\vueProject\\\\admin\\\\vue-element-admin\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _systemManager = _interopRequireDefault(require(\"@/api/system-manager\"));\n\nvar _auth = require(\"@/utils/auth\");\n\nvar _jsonformdata = _interopRequireDefault(require(\"@/api/jsonformdata\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'currencyExchangeRate',\n  data: function data() {\n    return {\n      tableData: [],\n      token: (0, _auth.getToken)(),\n      dialogEditFormVisible: false,\n      optionVisible: false,\n      dialogType: 'add',\n      formLabelWidth: '120px',\n      countryId: '',\n      left: '0px',\n      top: '0px',\n      editCurrencyForm: {\n        country_name: '',\n        country: '',\n        stamp: '',\n        exchange_rate: '0.0000'\n      }\n    };\n  },\n  methods: {\n    getCountryIndex: function getCountryIndex() {\n      var _this = this;\n\n      _systemManager.default.getCountryIndex(this.token).then(function (data) {\n        _this.tableData = data.data;\n        _this.countryId = data.data.country_id;\n      });\n    },\n    createCountry: function createCountry() {\n      var _this2 = this;\n\n      var postData = _jsonformdata.default.JsonData(this.editCurrencyForm);\n\n      var isAdd = this.dialogType === 'add';\n\n      if (isAdd) {\n        _systemManager.default.createCountry(postData, this.token).then(function (data) {\n          _this2.$message({\n            message: data.data.log,\n            type: 'success'\n          });\n\n          _this2.getCountryIndex();\n\n          _this2.closeDialog();\n        });\n      } else {\n        _systemManager.default.editCountry(postData, this.countryId, this.token).then(function (data) {\n          _this2.$message({\n            message: data.data.log,\n            type: 'success'\n          });\n\n          _this2.getCountryIndex();\n\n          _this2.closeDialog();\n        });\n      }\n\n      this.editCurrencyForm = {\n        country_name: '',\n        country: '',\n        stamp: '',\n        exchange_rate: '0.0000'\n      };\n    },\n    deleteCountry: function deleteCountry() {\n      var _this3 = this;\n\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _systemManager.default.deleteCountry(_this3.countryId, _this3.token).then(function (data) {\n          _this3.$message({\n            message: data.data.log,\n            type: 'success'\n          });\n\n          _this3.getCountryIndex();\n\n          _this3.closeDialog();\n        });\n      }).catch(function () {\n        _this3.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    handleAddCurrency: function handleAddCurrency() {\n      this.dialogType = 'add';\n      this.dialogEditFormVisible = true;\n    },\n    installCountry: function installCountry() {\n      var _this4 = this;\n\n      _systemManager.default.installCountry(this.token).then(function (data) {\n        _this4.$message({\n          message: data.data.log,\n          type: 'success'\n        });\n\n        _this4.getCountryIndex();\n      });\n    },\n    handleEditCurrency: function handleEditCurrency() {\n      this.dialogType = 'edit';\n      this.dialogEditFormVisible = true;\n    },\n    closeDialog: function closeDialog() {\n      this.dialogEditFormVisible = false;\n    },\n    closeMenu: function closeMenu() {\n      this.optionVisible = false;\n    },\n    rightClick: function rightClick(row, column, e) {\n      e.preventDefault();\n      this.publicMenu(e);\n      console.log(row);\n      this.countryId = row.country_id;\n      this.editCurrencyForm = {\n        country_name: row.country_name,\n        country: row.country,\n        stamp: row.stamp,\n        exchange_rate: row.exchange_rate\n      };\n      this.optionVisible = true;\n    },\n    publicMenu: function publicMenu(e) {\n      var menuMinWidth = 105;\n      var offsetLeft = this.$el.getBoundingClientRect().left; // container margin left\n\n      var offsetWidth = this.$el.offsetWidth; // container width\n\n      var maxLeft = offsetWidth - menuMinWidth; // left boundary\n\n      var left = e.clientX - offsetLeft + 15; // 15: margin right\n\n      if (left > maxLeft) {\n        this.left = maxLeft;\n      } else {\n        this.left = left;\n      }\n\n      this.top = e.pageY - 80;\n    }\n  },\n  created: function created() {\n    this.getCountryIndex();\n  },\n  watch: {\n    optionVisible: function optionVisible(value) {\n      if (value) {\n        document.body.addEventListener('click', this.closeMenu);\n      } else {\n        document.body.removeEventListener('click', this.closeMenu);\n      }\n    }\n  }\n};\nexports.default = _default;",null]}
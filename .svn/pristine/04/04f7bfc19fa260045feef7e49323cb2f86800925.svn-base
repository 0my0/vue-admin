{"remainingRequest":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vueProject\\admin\\vue-element-admin\\src\\views\\system-manager\\mail-account.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vueProject\\admin\\vue-element-admin\\src\\views\\system-manager\\mail-account.vue","mtime":1576488045132},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport SystemManager from  '@/api/system-manager'\nimport { getToken} from  '@/utils/auth'\nimport toJsonData from '@/api/jsonformdata'\nexport default {\n  name:'mail-account',\n  data() {\n   return{\n     tableData: [],\n     token: getToken(),\n     dialogFormVisible: false,\n     formLabelWidth:'120px',\n     siteId:'',\n     siteData:[],\n     dialogType:'',\n     form: {\n       site_id:'',\n       smtp:'',\n       port:'',\n       username:'',\n       password:'',\n       from:''\n     }\n   }\n  },\n  methods: {\n    getMailAccountIndex() {\n      SystemManager.getMailAccountIndex(this.token).then(data => {\n        this.tableData = data.data\n      })\n    },\n    getSiteIndex() {\n      SystemManager.getSiteIndex(this.token).then(data => {\n        this.siteData=data.data\n      })\n    },\n    createMail() {\n      const postData = toJsonData.JsonData(this.form);\n      if(this.dialogType== 'add') {\n        SystemManager.createMail(postData,this.token).then(data => {\n          this.$message({\n            message: data.data.log,\n            type: 'success'\n          })\n          this.closeDialog();\n          this.getMailAccountIndex();\n        }).catch(error => {\n          console.log(error)\n        })\n      }else{\n        SystemManager.editMail(postData,this.siteId,this.token).then(data=> {\n          this.$message({\n            message: data.data.log,\n            type: 'success'\n          })\n          this.closeDialog();\n          this.getMailAccountIndex();\n        }).catch(error => {\n          console.log(error)\n        })\n      }\n    },\n    editMail(row){\n     console.log(row)\n      this.siteId = row.site_id;\n      this.form={\n        site_id:row.site_id,\n        smtp:row.smtp,\n        port:row.port,\n        username:row.username,\n        password:row.password,\n        from:row.from\n      }\n      this.dialogType = 'edit';\n      this.dialogFormVisible = true;\n\n    },\n    showDialog() {\n      this.form={\n        site_id:'',\n          smtp:'',\n          port:'',\n          username:'',\n          password:'',\n          from:''\n      }\n      this.dialogFormVisible = true;\n      this.dialogType = 'add';\n\n    },\n    closeDialog() {\n      this.dialogFormVisible = false;\n    }\n  },\n  created() {\n    this.getMailAccountIndex();\n    this.getSiteIndex();\n  }\n}\n",null]}
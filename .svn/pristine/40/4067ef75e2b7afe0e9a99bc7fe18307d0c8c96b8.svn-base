{"remainingRequest":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vueProject\\admin\\vue-element-admin\\src\\views\\sales\\first-hand\\gold-order-manager\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vueProject\\admin\\vue-element-admin\\src\\views\\sales\\first-hand\\gold-order-manager\\index.vue","mtime":1577439761355},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport SystemManager from  '@/api/system-manager'\nimport Sales from '@/api/sales'\nimport { getToken} from  '@/utils/auth'\nimport toJsonData from '@/api/jsonformdata'\nexport default {\n  name:'gold-order-manager',\n  data() {\n    return{\n      formInline: {\n        stime: '',\n        ltime:'',\n        site_id:[],\n        games: '',\n        code:[],\n        which_select:'',\n        select_value:'',\n        is_coupon:false,\n        status:[]\n      },\n      orderAmount:'',\n      usdAmount:'',\n      cadAmount:'',\n      audAmount:'',\n      eurAmount:'',\n      youhuiAmount:'',\n      currentPage:1,\n      totalCount: 1,\n      pageSize:50,\n      tableData:[],\n      statusData:[],\n      token:getToken(),\n      checSitekAll: false,\n      checkGameAll:false,\n      checkPaymentAll:false,\n      isIndeterminate: true,\n      formLabelWidth:'130px',\n      dialogTableVisible:false,\n      siteData: [],\n      gameData:[],\n      selectData: [\n        {\n          title: '玩家邮箱',\n          name:'email'\n        },\n        {\n          title: '流水号',\n          name:'orderno'\n        },\n        {\n          title: '订单号',\n          name:'order_number'\n        },\n        {\n          title:'付款邮箱',\n          name:'pay_email'\n        },\n        {\n          title:'付款姓名',\n          name:'name'\n        },\n        {\n          title:'Coupon',\n          name:'coupon'\n        }\n      ],\n      paymentData:[],\n      pickerOptionsStart: {\n        disabledDate:time => {\n          const endDateVal = new Date(this.formInline.ltime).getTime()\n          if (endDateVal) {\n            return time.getTime() > endDateVal - 0\n          }\n          return  time.getTime() < Date.now()-8.64e7;\n        }\n      },\n      pickerOptionsEnd: {\n        disabledDate: time => {\n          const beginDateVal = new Date(this.formInline.stime).getTime()\n          if (beginDateVal) {\n            return time.getTime() < beginDateVal - 0\n          }\n        }\n      }\n    }\n  },\n  methods: {\n    handleCheckAllChange(val) {\n      const siteId = [];\n      this.siteData.forEach(item => {\n        siteId.push(item.site_id);\n      })\n      this.formInline.site_id = val ? siteId : [];\n      this.isIndeterminate = false;\n    },\n    tableRowClassName(row, index) {\n      if(row.row.status === '完成' || row.row.status === '追回'){\n        return 'success-row';\n      }else if(row.row.status === '待验证') {\n        return 'verified-row'\n      }else if(row.row.status === '已废弃' || row.row.status === '退款') {\n        return 'abandoned-row'\n      }else if(row.row.status === '欺诈订单' || row.row.status === '问题订单') {\n        return 'request-row'\n      }\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.searchLimitOrder(val);\n    },\n    searchLimitOrder(val){\n      const postData = toJsonData.JsonData(this.formInline);\n      Sales.searchLimitOrder(postData,val,this.currentPage,this.token).then(data => {\n        this.tableData = data.data;\n        this.totalCount = parseInt(data.count)\n        this.orderAmount = data.amount + '(USD)';\n        this.usdAmount = data.USD + 'USD';\n        this.cadAmount = data.CAD +'CAD';\n        this.audAmount = data.AUD + 'AUD';\n        this.eurAmount = data.EUR = 'EUR';\n        this.youhuiAmount = data.youhui + 'USD'\n      })\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val\n      this.searchPageOrder(val);\n    },\n    searchPageOrder(val) {\n      const postData = toJsonData.JsonData(this.formInline);\n      Sales.searchLimitOrder(postData,this.pageSize,val,this.token).then(data => {\n        this.tableData = data.data;\n        this.totalCount = parseInt(data.count)\n        this.orderAmount = data.amount + '(USD)';\n        this.usdAmount = data.USD + 'USD';\n        this.cadAmount = data.CAD +'CAD';\n        this.audAmount = data.AUD + 'AUD';\n        this.eurAmount = data.EUR = 'EUR';\n        this.youhuiAmount = data.youhui + 'USD'\n      })\n    },\n    handleCheckGameAllChange(val) {\n      const games = [];\n      this.gameData.forEach(item => {\n        games.push(item.game_id);\n      })\n      this.formInline.games = val ? games : [];\n      this.isIndeterminate = false;\n    },\n    handleCheckPaymentAllChange(val){\n      const code = [];\n      this.paymentData.forEach(item => {\n        code.push(item.code);\n      })\n      this.formInline.code= val ? code:[];\n      this.isIndeterminate = false;\n    },\n    changeSelect() {\n\n    },\n    searchOrder() {\n      const postData = toJsonData.JsonData(this.formInline);\n      this.currentPage = 1;\n      Sales.searchOrder(postData,this.token).then(data => {\n        this.tableData = data.data;\n        this.totalCount = parseInt(data.count)\n        this.orderAmount = data.amount + '(USD)';\n        this.usdAmount = data.USD + 'USD';\n        this.cadAmount = data.CAD +'CAD';\n        this.audAmount = data.AUD + 'AUD';\n        this.eurAmount = data.EUR = 'EUR';\n        this.youhuiAmount = data.youhui + 'USD'\n      })\n    },\n    getAllstatus() {\n      Sales.getAllstatus(this.token).then(data => {\n          this.statusData = data.data\n      })\n    },\n    handleCheckedSiteChange(value) {\n      // let checkedCount = value.length;\n      // this.checSitekAll = checkedCount === this.siteData.length;\n      // this.isIndeterminate = checkedCount > 0 && checkedCount < this.siteData.length;\n    },\n    getGameIndex() {\n      this.formInline.games = [];\n      SystemManager.getGameIndex(this.token).then(data => {\n        this.gameData=data.data\n      })\n    },\n    getSiteIndex() {\n      SystemManager.getSiteIndex(this.token).then(data => {\n        this.siteData=data.data\n      })\n    },\n    getPaymentMethod() {\n      SystemManager.getPaymentMethod(this.token).then(data => {\n        this.paymentData = data.data;\n      })\n    },\n    getOrderIndex() {\n      Sales.getOrderIndex(this.token).then(data => {\n        this.tableData = data.data;\n        this.totalCount = parseInt(data.count)\n        this.orderAmount = data.amount + '(USD)';\n        this.usdAmount = data.USD + 'USD';\n        this.cadAmount = data.CAD +'CAD';\n        this.audAmount = data.AUD + 'AUD';\n        this.eurAmount = data.EUR = 'EUR';\n        this.youhuiAmount = data.youhui + 'USD'\n      })\n    }\n  },\n  created() {\n    this.getSiteIndex();\n    this.getGameIndex();\n    this.getPaymentMethod();\n    this.getAllstatus();\n    this.getOrderIndex();\n    // this.formInline.which_select = this.selectData[0].title;\n  }\n}\n",null]}
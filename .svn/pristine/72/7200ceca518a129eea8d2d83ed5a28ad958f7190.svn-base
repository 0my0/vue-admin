{"remainingRequest":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js!E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\vueProject\\admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vueProject\\admin\\vue-element-admin\\src\\views\\sales\\first-hand\\gold-order-manager\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vueProject\\admin\\vue-element-admin\\src\\views\\sales\\first-hand\\gold-order-manager\\index.vue","mtime":1577691686601},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"E:\\\\vueProject\\\\admin\\\\vue-element-admin\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nvar _systemManager = _interopRequireDefault(require(\"@/api/system-manager\"));\n\nvar _sales = _interopRequireDefault(require(\"@/api/sales\"));\n\nvar _auth = require(\"@/utils/auth\");\n\nvar _jsonformdata = _interopRequireDefault(require(\"@/api/jsonformdata\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'gold-order-manager',\n  data: function data() {\n    var _this = this;\n\n    return {\n      formInline: {\n        stime: '',\n        ltime: '',\n        site_id: [],\n        games: '',\n        code: [],\n        which_select: '',\n        select_value: '',\n        is_coupon: false,\n        status: []\n      },\n      optionVisible: false,\n      isDisabled: false,\n      orderAmount: '',\n      usdAmount: '',\n      cadAmount: '',\n      audAmount: '',\n      eurAmount: '',\n      youhuiAmount: '',\n      currentPage: 1,\n      totalCount: 1,\n      pageSize: 50,\n      tableData: [],\n      statusData: [],\n      token: (0, _auth.getToken)(),\n      checSitekAll: false,\n      checkGameAll: false,\n      checkPaymentAll: false,\n      isIndeterminate: true,\n      formLabelWidth: '130px',\n      dialogTableVisible: false,\n      left: '0px',\n      top: '0px',\n      siteData: [],\n      gameData: [],\n      orderId: '',\n      selectData: [{\n        title: '玩家邮箱',\n        name: 'email'\n      }, {\n        title: '流水号',\n        name: 'orderno'\n      }, {\n        title: '订单号',\n        name: 'order_number'\n      }, {\n        title: '付款邮箱',\n        name: 'pay_email'\n      }, {\n        title: '付款姓名',\n        name: 'name'\n      }, {\n        title: 'Coupon',\n        name: 'coupon'\n      }],\n      paymentData: [],\n      pickerOptionsStart: {\n        disabledDate: function disabledDate(time) {\n          var endDateVal = new Date(_this.formInline.ltime).getTime();\n\n          if (endDateVal) {\n            return time.getTime() > endDateVal - 0;\n          }\n\n          return time.getTime() < Date.now() - 8.64e7;\n        }\n      },\n      pickerOptionsEnd: {\n        disabledDate: function disabledDate(time) {\n          var beginDateVal = new Date(_this.formInline.stime).getTime();\n\n          if (beginDateVal) {\n            return time.getTime() < beginDateVal - 0;\n          }\n        }\n      }\n    };\n  },\n  methods: {\n    handleCheckAllChange: function handleCheckAllChange(val) {\n      var siteId = [];\n      this.siteData.forEach(function (item) {\n        siteId.push(item.site_id);\n      });\n      this.formInline.site_id = val ? siteId : [];\n      this.isIndeterminate = false;\n    },\n    tableRowClassName: function tableRowClassName(row, index) {\n      if (row.row.status === '完成' || row.row.status === '追回') {\n        return 'success-row';\n      } else if (row.row.status === '待验证') {\n        return 'verified-row';\n      } else if (row.row.status === '已废弃' || row.row.status === '退款') {\n        return 'abandoned-row';\n      } else if (row.row.status === '欺诈订单' || row.row.status === '问题订单') {\n        return 'request-row';\n      }\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.pageSize = val;\n      this.searchLimitOrder(val);\n    },\n    searchLimitOrder: function searchLimitOrder(val) {\n      var _this2 = this;\n\n      var postData = _jsonformdata.default.JsonData(this.formInline);\n\n      _sales.default.searchLimitOrder(postData, val, this.currentPage, this.token).then(function (data) {\n        _this2.tableData = data.data;\n        _this2.totalCount = parseInt(data.count);\n        _this2.orderAmount = data.amount + '(USD)';\n        _this2.usdAmount = data.USD + 'USD';\n        _this2.cadAmount = data.CAD + 'CAD';\n        _this2.audAmount = data.AUD + 'AUD';\n        _this2.eurAmount = data.EUR = 'EUR';\n        _this2.youhuiAmount = data.youhui + 'USD';\n      });\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      this.searchPageOrder(val);\n    },\n    searchPageOrder: function searchPageOrder(val) {\n      var _this3 = this;\n\n      var postData = _jsonformdata.default.JsonData(this.formInline);\n\n      _sales.default.searchLimitOrder(postData, this.pageSize, val, this.token).then(function (data) {\n        _this3.tableData = data.data;\n        _this3.totalCount = parseInt(data.count);\n        _this3.orderAmount = data.amount + '(USD)';\n        _this3.usdAmount = data.USD + 'USD';\n        _this3.cadAmount = data.CAD + 'CAD';\n        _this3.audAmount = data.AUD + 'AUD';\n        _this3.eurAmount = data.EUR = 'EUR';\n        _this3.youhuiAmount = data.youhui + 'USD';\n      });\n    },\n    handleCheckGameAllChange: function handleCheckGameAllChange(val) {\n      var games = [];\n      this.gameData.forEach(function (item) {\n        games.push(item.game_id);\n      });\n      this.formInline.games = val ? games : [];\n      this.isIndeterminate = false;\n    },\n    handleCheckPaymentAllChange: function handleCheckPaymentAllChange(val) {\n      var code = [];\n      this.paymentData.forEach(function (item) {\n        code.push(item.code);\n      });\n      this.formInline.code = val ? code : [];\n      this.isIndeterminate = false;\n    },\n    changeSelect: function changeSelect() {},\n    rightClick: function rightClick(row, column, e) {\n      e.preventDefault();\n      this.publicMenu(e);\n      this.orderId = row.order_id;\n      this.isDisabled = false;\n      console.log(this.token);\n      var admin_id = this.token.split('_')[0];\n      console.log(admin_id);\n\n      if (row.admin_id) {\n        this.isDisabled = true;\n      } else if (row.admin == admin_id) {}\n\n      this.optionVisible = true;\n    },\n    closeMenu: function closeMenu() {\n      this.optionVisible = false;\n    },\n    publicMenu: function publicMenu(e) {\n      var menuMinWidth = 105;\n      var offsetLeft = this.$el.getBoundingClientRect().left; // container margin left\n\n      var offsetWidth = this.$el.offsetWidth; // container width\n\n      var maxLeft = offsetWidth - menuMinWidth; // left boundary\n\n      var left = e.clientX - offsetLeft + 15; // 15: margin right\n\n      if (left > maxLeft) {\n        this.left = maxLeft;\n      } else {\n        this.left = left;\n      }\n\n      this.top = e.pageY - 80;\n    },\n    signOrder: function signOrder() {\n      var _this4 = this;\n\n      if (this.isDisabled) {} else {\n        _sales.default.signOrder(this.orderId, this.token).then(function (data) {\n          _this4.$message({\n            message: data.data.log,\n            type: 'success'\n          });\n\n          _this4.getOrderIndex();\n        });\n      }\n    },\n    searchOrder: function searchOrder() {\n      var _this5 = this;\n\n      var postData = _jsonformdata.default.JsonData(this.formInline);\n\n      this.currentPage = 1;\n\n      _sales.default.searchOrder(postData, this.token).then(function (data) {\n        _this5.tableData = data.data;\n        _this5.totalCount = parseInt(data.count);\n        _this5.orderAmount = data.amount + '(USD)';\n        _this5.usdAmount = data.USD + 'USD';\n        _this5.cadAmount = data.CAD + 'CAD';\n        _this5.audAmount = data.AUD + 'AUD';\n        _this5.eurAmount = data.EUR = 'EUR';\n        _this5.youhuiAmount = data.youhui + 'USD';\n      });\n    },\n    getAllstatus: function getAllstatus() {\n      var _this6 = this;\n\n      _sales.default.getAllstatus(this.token).then(function (data) {\n        _this6.statusData = data.data;\n      });\n    },\n    handleCheckedSiteChange: function handleCheckedSiteChange(value) {// let checkedCount = value.length;\n      // this.checSitekAll = checkedCount === this.siteData.length;\n      // this.isIndeterminate = checkedCount > 0 && checkedCount < this.siteData.length;\n    },\n    getGameIndex: function getGameIndex() {\n      var _this7 = this;\n\n      this.formInline.games = [];\n\n      _systemManager.default.getGameIndex(this.token).then(function (data) {\n        _this7.gameData = data.data;\n      });\n    },\n    getSiteIndex: function getSiteIndex() {\n      var _this8 = this;\n\n      _systemManager.default.getSiteIndex(this.token).then(function (data) {\n        _this8.siteData = data.data;\n      });\n    },\n    getPaymentMethod: function getPaymentMethod() {\n      var _this9 = this;\n\n      _systemManager.default.getPaymentMethod(this.token).then(function (data) {\n        _this9.paymentData = data.data;\n      });\n    },\n    getOrderIndex: function getOrderIndex() {\n      var _this10 = this;\n\n      _sales.default.getOrderIndex(this.token).then(function (data) {\n        _this10.tableData = data.data;\n        _this10.totalCount = parseInt(data.count);\n        _this10.orderAmount = data.amount + '(USD)';\n        _this10.usdAmount = data.USD + 'USD';\n        _this10.cadAmount = data.CAD + 'CAD';\n        _this10.audAmount = data.AUD + 'AUD';\n        _this10.eurAmount = data.EUR = 'EUR';\n        _this10.youhuiAmount = data.youhui + 'USD';\n      });\n    }\n  },\n  created: function created() {\n    this.getSiteIndex();\n    this.getGameIndex();\n    this.getPaymentMethod();\n    this.getAllstatus();\n    this.getOrderIndex(); // this.formInline.which_select = this.selectData[0].title;\n  },\n  watch: {\n    optionVisible: function optionVisible(value) {\n      if (value) {\n        document.body.addEventListener('click', this.closeMenu);\n      } else {\n        document.body.removeEventListener('click', this.closeMenu);\n      }\n    }\n  }\n};\nexports.default = _default;",null]}
{"remainingRequest":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vueProject\\admin\\vue-element-admin\\src\\views\\sales\\first-hand\\site-user-manager\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vueProject\\admin\\vue-element-admin\\src\\views\\sales\\first-hand\\site-user-manager\\index.vue","mtime":1576734890362},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport SystemManager from  '@/api/system-manager'\nimport Sales from '@/api/sales'\nimport { getToken} from  '@/utils/auth'\nimport toJsonData from '@/api/jsonformdata'\nexport default {\n  name:'site-user-manager',\n  data() {\n    return {\n      dialogFormVisible: false,\n      formLabelWidth:'120px',\n      formInline: {\n        site_id: '',\n        email:'',\n        firstname: '',\n        mobile:''\n      },\n      form:{\n        passwd:''\n      },\n      siteData: [],\n      tableData:[],\n      currentPage:1,\n      token: getToken(),\n      totalCount: 1,\n      pageSize:50,\n      uid:''\n    }\n  },\n  methods: {\n    showDialog(id) {\n      this.form.passwd='';\n      this.dialogFormVisible = true;\n      this.uid = id;\n    },\n    getSiteIndex() {\n      SystemManager.getSiteIndex(this.token).then(data => {\n        this.siteData=data.data\n      })\n    },\n    editPass(){\n      const postData = toJsonData.JsonData(this.form);\n      Sales.editPass(postData,this.uid,this.token).then(data=> {\n       this.$message({\n         message: data.data.log,\n         type: 'success'\n       })\n        this.getSiteUser();\n        this.closeDialog();\n      }).catch(error => {\n        console.log(error)\n      })\n    },\n    closeDialog() {\n      this.dialogFormVisible = false;\n    },\n    searchSiteUser(){\n      const postData = toJsonData.JsonData(this.formInline);\n      this.currentPage = 1;\n      Sales.searchSiteUser(postData, this.token).then(data => {\n        this.tableData = data.data\n        this.totalCount = parseInt(data.count);\n      })\n    },\n    searchLimitSite(val) {\n      const postData = toJsonData.JsonData(this.formInline);\n      Sales.searchLimitSite(postData,val,this.currentPage,this.token).then(data => {\n        this.tableData = data.data;\n        this.totalCount = parseInt(data.count)\n      })\n    },\n    searchPageSite(val) {\n      const postData = toJsonData.JsonData(this.formInline);\n      Sales.searchLimitSite(postData,this.pageSize,val,this.token).then(data => {\n        this.tableData = data.data;\n        this.totalCount = parseInt(data.count)\n      })\n    },\n    getSiteUser(){\n      Sales.getSiteUser(this.token).then(data => {\n        this.tableData = data.data;\n        this.totalCount = parseInt(data.count)\n      })\n    },\n    changeSite() {\n\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.searchLimitSite(val);\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val\n      this.searchPageSite(val);\n    }\n  },\n  created() {\n    this.getSiteIndex();\n    this.getSiteUser();\n  },\n\n}\n",null]}
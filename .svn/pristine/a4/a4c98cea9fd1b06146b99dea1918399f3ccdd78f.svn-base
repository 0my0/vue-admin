(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc8c46c8"],{"405d":function(e,t,i){},"782e":function(e,t,i){"use strict";i("456d"),i("ac6a");t["a"]={JsonData:function(e){var t=new FormData;return Object.keys(e).forEach(function(i){t.append("data["+i+"]",e[i])}),t}}},"9ebf":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-row",[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAddSite}},[e._v("添加站点")]),e._v(" "),i("el-dialog",{attrs:{title:"添加/修改人员",visible:e.dialogEditFormVisible,title:"add"===e.dialogType?"添加站点":"修改站点"},on:{"update:visible":function(t){e.dialogEditFormVisible=t}}},[i("el-form",{attrs:{model:e.editSiteForm}},[i("el-form-item",{attrs:{label:"站点名称","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off",disabled:"edit"===e.dialogType},model:{value:e.editSiteForm.site_name,callback:function(t){e.$set(e.editSiteForm,"site_name",t)},expression:"editSiteForm.site_name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"站点域名","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.editSiteForm.site_url,callback:function(t){e.$set(e.editSiteForm,"site_url",t)},expression:"editSiteForm.site_url"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"站点业务","label-width":e.formLabelWidth}},[i("el-checkbox-group",{model:{value:e.editSiteForm.yewu,callback:function(t){e.$set(e.editSiteForm,"yewu",t)},expression:"editSiteForm.yewu"}},e._l(e.siteBusiness,function(e,t){return i("el-checkbox",{attrs:{label:e.yewu}})}),1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogEditFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.createSite}},[e._v("确 定")])],1)],1)],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","row-class-name":e.rowClassName},on:{"row-contextmenu":e.rightClick}},[i("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"game-config"},[i("span",{on:{click:function(i){return e.gameConfigLink(t.$index,t.row)}}},[e._v("游戏配置")])])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"site_name",label:"名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"yewu",label:"业务"}}),e._v(" "),i("el-table-column",{attrs:{prop:"site_url",label:"域名"}})],1),e._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:e.optionVisible,expression:"optionVisible"}],staticClass:"contextmenu",style:{left:e.left+"px",top:e.top+"px"}},[i("li",{on:{click:e.handleEditSite}},[e._v("修改选择站点")]),e._v(" "),i("li",{on:{click:e.deleteSite}},[e._v("删除选择站点")])])],1)},a=[],o=(i("28a5"),i("e2da")),l=i("5f87"),r=i("782e"),c={name:"web-config",data:function(){return{tableData:[],gameConfig:[],dialogEditFormVisible:!1,optionVisible:!1,dialogType:"add",formLabelWidth:"120px",top:0,left:0,siteId:"",editSiteForm:{site_name:"",site_url:"",yewu:[]},siteBusiness:[{yewu:"销售"},{yewu:"采购"},{yewu:"资源"}],token:Object(l["a"])()}},methods:{getSiteIndex:function(){var e=this;o["a"].getSiteIndex(this.token).then(function(t){e.tableData=t.data})},rowClassName:function(e){var t=e.row,i=e.rowIndex;t.id=i},gameConfigLink:function(e,t){this.siteId=this.tableData[t.id].site_id,this.$router.push({path:"/system/game-config",query:{id:this.siteId}})},createSite:function(){var e=this,t=r["a"].JsonData(this.editSiteForm),i="add"===this.dialogType;i?o["a"].createSite(t,this.token).then(function(t){e.$message({message:t.data.log,type:"success"}),e.getSiteIndex(),e.closeDialog()}).catch(function(e){console.log(e)}):o["a"].editSite(t,this.siteId,this.token).then(function(t){e.$message({message:t.data.log,type:"success"}),e.getSiteIndex(),e.closeDialog()}).catch(function(e){console.log(e)}),this.editSiteForm={site_name:"",site_url:"",yewu:[]}},deleteSite:function(){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o["a"].deleteSite(e.siteId,e.token).then(function(t){e.$message({message:t.data.log,type:"success"}),e.getSiteIndex(),e.closeDialog()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},rightClick:function(e,t,i){console.log(e),i.preventDefault(),this.publicMenu(i),this.siteId=e.site_id,this.editSiteForm={site_name:e.site_name,site_url:e.site_url,yewu:e.yewu.split(",")},this.editSiteForm.site_name=e.site_name,this.optionVisible=!0},publicMenu:function(e){var t=105,i=this.$el.getBoundingClientRect().left,n=this.$el.offsetWidth,a=n-t,o=e.clientX-i+15;this.left=o>a?a:o,this.top=e.clientY-80},handleAddSite:function(){this.dialogType="add",this.dialogEditFormVisible=!0},handleEditSite:function(){this.dialogType="edit",this.dialogEditFormVisible=!0},closeDialog:function(){this.dialogEditFormVisible=!1},closeMenu:function(){this.optionVisible=!1}},created:function(){this.getSiteIndex()},watch:{optionVisible:function(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}}},s=c,u=(i("a22b"),i("2877")),d=Object(u["a"])(s,n,a,!1,null,"492fcbe9",null);t["default"]=d.exports},a22b:function(e,t,i){"use strict";var n=i("405d"),a=i.n(n);a.a},b0b4:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var n=i("85f2"),a=i.n(n);function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),a()(e,n.key,n)}}function l(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e}},d225:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",function(){return n})},e2da:function(e,t,i){"use strict";var n=i("d225"),a=i("b0b4"),o=i("b775"),l=function(){function e(){Object(n["a"])(this,e)}return Object(a["a"])(e,[{key:"getRoleIndex",value:function(e){return Object(o["a"])({url:"/role/index",method:"get",params:{token:e}})}},{key:"createRole",value:function(e,t){return Object(o["a"])({url:"/role/create?token=".concat(t),method:"post",data:e})}},{key:"deleteRole",value:function(e,t){return Object(o["a"])({url:"/role/delete",method:"get",params:{role_id:e,token:t}})}},{key:"getAdminIndex",value:function(e,t){return Object(o["a"])({url:"/admin/index",method:"get",params:{role_id:e,token:t}})}},{key:"createPerson",value:function(e,t){return Object(o["a"])({url:"/admin/create?token=".concat(t),method:"post",data:e})}},{key:"modifyPerson",value:function(e,t,i){return Object(o["a"])({url:"/admin/edit?token=".concat(t,"&admin_id=").concat(i),method:"post",data:e})}},{key:"deletePerson",value:function(e,t){return Object(o["a"])({url:"admin/delete",method:"get",params:{admin_id:e,token:t}})}},{key:"searchPeople",value:function(e,t){return Object(o["a"])({url:"/admin/index?token=".concat(t),method:"post",data:e})}},{key:"getSiteIndex",value:function(e){return Object(o["a"])({url:"/site/index",method:"get",params:{token:e}})}},{key:"createSite",value:function(e,t){return Object(o["a"])({url:"/site/create?token=".concat(t),method:"post",data:e})}},{key:"editSite",value:function(e,t,i){return Object(o["a"])({url:"/site/edit?site_id=".concat(t,"&token=").concat(i),method:"post",data:e})}},{key:"deleteSite",value:function(e,t){return Object(o["a"])({url:"/site/delete",method:"get",params:{site_id:e,token:t}})}},{key:"getCountryIndex",value:function(e){return Object(o["a"])({url:"/country/index",method:"get",params:{token:e}})}},{key:"createCountry",value:function(e,t){return Object(o["a"])({url:"/country/create?token=".concat(t),method:"post",data:e})}},{key:"installCountry",value:function(e){return Object(o["a"])({url:"/country/install",method:"get",params:{token:e}})}},{key:"editCountry",value:function(e,t,i){return Object(o["a"])({url:"/country/edit?country_id=".concat(t,"&token=").concat(i),method:"post",data:e})}},{key:"deleteCountry",value:function(e,t){return Object(o["a"])({url:"/country/delete",method:"get",params:{country_id:e,token:t}})}},{key:"getGameIndex",value:function(e){return Object(o["a"])({url:"/game/index",method:"get",params:{token:e}})}},{key:"createGame",value:function(e,t){return Object(o["a"])({url:"/game/create?token=".concat(t),method:"post",data:e})}},{key:"editGame",value:function(e,t,i){return Object(o["a"])({url:"/game/edit?game_id=".concat(t,"&token=").concat(i),method:"post",data:e})}},{key:"getGameConfigIndex",value:function(e,t){return Object(o["a"])({url:"/sitegame/edit",method:"get",params:{site_id:e,token:t}})}},{key:"saveGameConfigIndex",value:function(e,t,i){return Object(o["a"])({url:"/sitegame/edit?site_id=".concat(t,"&token=").concat(i),method:"post",data:e})}}]),e}();t["a"]=new l}}]);
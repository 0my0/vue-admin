{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-1c8b49a9\"],{4299:function(e,t,o){\"use strict\";var n=o(\"9935\"),a=o.n(n);a.a},\"5c99\":function(e,t,o){\"use strict\";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"div\",[o(\"el-row\",[o(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-plus\"},on:{click:e.showDialog}},[e._v(\"添加优惠券\")]),e._v(\" \"),o(\"el-dialog\",{attrs:{title:\"优惠券信息-销售一手\",visible:e.dialogFormVisible},on:{\"update:visible\":function(t){e.dialogFormVisible=t}}},[o(\"el-form\",{attrs:{model:e.couponForm}},[o(\"el-form-item\",{attrs:{label:\"站点\",\"label-width\":e.formLabelWidth}},[o(\"el-select\",{attrs:{placeholder:\"选择站点\"},on:{change:e.addChangeCoupon},model:{value:e.couponForm.site_id,callback:function(t){e.$set(e.couponForm,\"site_id\",t)},expression:\"couponForm.site_id\"}},e._l(e.siteData,function(e,t){return o(\"el-option\",{attrs:{label:e.site_name,value:e.site_id}})}),1)],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:\"游戏\",\"label-width\":e.formLabelWidth}},[o(\"el-checkbox\",{on:{change:e.handleCheckAllChange},model:{value:e.checked,callback:function(t){e.checked=t},expression:\"checked\"}},[e._v(\"全选\")]),e._v(\" \"),o(\"el-checkbox-group\",{model:{value:e.couponForm.game_ids,callback:function(t){e.$set(e.couponForm,\"game_ids\",t)},expression:\"couponForm.game_ids\"}},e._l(e.gameData,function(t,n){return o(\"el-checkbox\",{attrs:{label:t.game_id,value:t.game_id}},[e._v(e._s(t.title))])}),1)],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:\"优惠方式\",\"label-width\":e.formLabelWidth}},[o(\"el-select\",{attrs:{placeholder:\"选择优惠方式\"},on:{change:e.changeCouponType},model:{value:e.couponForm.coupon_type,callback:function(t){e.$set(e.couponForm,\"coupon_type\",t)},expression:\"couponForm.coupon_type\"}},e._l(e.couponType,function(e,t){return o(\"el-option\",{attrs:{label:e,value:e}})}),1)],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:\"优惠券标题\",\"label-width\":e.formLabelWidth}},[o(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.couponForm.title,callback:function(t){e.$set(e.couponForm,\"title\",t)},expression:\"couponForm.title\"}})],1),e._v(\" \"),e.isCouponHidden?o(\"el-form-item\",{attrs:{label:\"Code\",\"label-width\":e.formLabelWidth}},[o(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.couponForm.code,callback:function(t){e.$set(e.couponForm,\"code\",t)},expression:\"couponForm.code\"}})],1):e._e(),e._v(\" \"),o(\"el-form-item\",{attrs:{label:\"折扣\",\"label-width\":e.formLabelWidth}},[o(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.couponForm.price,callback:function(t){e.$set(e.couponForm,\"price\",t)},expression:\"couponForm.price\"}})],1),e._v(\" \"),e.isCouponHidden?e._e():o(\"el-form-item\",{attrs:{label:\"数量\",\"label-width\":e.formLabelWidth}},[o(\"el-input-number\",{attrs:{min:1},model:{value:e.couponForm.num,callback:function(t){e.$set(e.couponForm,\"num\",t)},expression:\"couponForm.num\"}})],1),e._v(\" \"),e.isCouponHidden?o(\"el-form-item\",{attrs:{label:\"开始时间\",\"label-width\":e.formLabelWidth}},[o(\"el-date-picker\",{attrs:{type:\"datetime\",placeholder:\"开始时间\",format:\"yyyy-MM-dd\",\"value-format\":\"yyyy-MM-dd\",\"picker-options\":e.pickerOptionsStart},model:{value:e.couponForm.stime,callback:function(t){e.$set(e.couponForm,\"stime\",t)},expression:\"couponForm.stime\"}})],1):e._e(),e._v(\" \"),e.isCouponHidden?o(\"el-form-item\",{attrs:{label:\"结束时间\",\"label-width\":e.formLabelWidth}},[o(\"el-date-picker\",{attrs:{type:\"datetime\",placeholder:\"结束时间\",\"value-format\":\"yyyy-MM-dd\",format:\"yyyy-MM-dd\",\"picker-options\":e.pickerOptionsEnd},model:{value:e.couponForm.ltime,callback:function(t){e.$set(e.couponForm,\"ltime\",t)},expression:\"couponForm.ltime\"}})],1):e._e()],1),e._v(\" \"),o(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"el-button\",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(\"取 消\")]),e._v(\" \"),o(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.addCoupon}},[e._v(\"确 定\")])],1)],1)],1),e._v(\" \"),o(\"div\",[o(\"el-form\",{staticClass:\"demo-form-inline\",attrs:{inline:!0,model:e.formInline}},[o(\"el-form-item\",{attrs:{label:\"站点\"}},[o(\"el-select\",{attrs:{placeholder:\"选择站点\"},on:{change:e.changeCoupon},model:{value:e.formInline.site_id,callback:function(t){e.$set(e.formInline,\"site_id\",t)},expression:\"formInline.site_id\"}},e._l(e.siteData,function(e,t){return o(\"el-option\",{attrs:{label:e.site_name,value:e.site_id}})}),1)],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:\"游戏\"}},[o(\"el-select\",{attrs:{placeholder:\"选择游戏\"},model:{value:e.formInline.game_id,callback:function(t){e.$set(e.formInline,\"game_id\",t)},expression:\"formInline.game_id\"}},e._l(e.gameData,function(e,t){return o(\"el-option\",{attrs:{label:e.title,value:e.game_id}})}),1)],1),e._v(\" \"),o(\"el-form-item\",[o(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.onSubmit}},[e._v(\"查询\")])],1)],1)],1),e._v(\" \"),o(\"div\",[o(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{border:\"\",data:e.tableData}},[o(\"el-table-column\",{attrs:{label:\"序列\",prop:\"id\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{prop:\"site_name\",label:\"网站名称\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{prop:\"game_name\",label:\"游戏名称\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{prop:\"title\",label:\"优惠券标题\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{prop:\"code\",label:\"Code\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{prop:\"type\",label:\"优惠方式\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{prop:\"price\",label:\"优惠百分比\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{prop:\"stime\",label:\"开始时间\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{prop:\"ltime\",label:\"结束时间\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{prop:\"admin_name\",label:\"创建人\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[o(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(o){return e.deleteCoupon(t.row.coupon_id)}}},[e._v(\"删除\")])]}}])})],1)],1)],1)},a=[],i=(o(\"ac6a\"),o(\"e2da\")),l=o(\"c540\"),r=o(\"5f87\"),c=o(\"782e\"),u={name:\"coupon-manager\",data:function(){var e=this;return{formInline:{site_id:\"\",game_id:\"\"},formLabelWidth:\"120px\",siteData:[],gameData:[],sequence:1,tableData:[],couponForm:{site_id:\"\",game_ids:[],title:\"\",code:\"\",price:\"\",stime:\"\",ltime:\"\",num:\"\",coupon_type:\"\"},gameIds:[],checked:!1,dialogFormVisible:!1,dialogAddFormVisible:!1,dialogPersonFormVisible:!1,dialogPermissionVisible:!1,couponType:[\"一次性优惠券\",\"多次优惠券\"],isCouponHidden:!0,token:Object(r[\"a\"])(),pickerOptionsStart:{disabledDate:function(t){var o=new Date(e.couponForm.ltime).getTime();return o?t.getTime()>o-0:t.getTime()<Date.now()-864e5}},pickerOptionsEnd:{disabledDate:function(t){var o=new Date(e.couponForm.stime).getTime();if(o)return t.getTime()<o-0}}}},methods:{getSiteIndex:function(){var e=this;i[\"a\"].getSiteIndex(this.token).then(function(t){e.siteData=t.data})},showDialog:function(){this.dialogFormVisible=!0,this.couponForm={site_id:\"\",game_ids:[],title:\"\",code:\"\",price:\"\",stime:\"\",ltime:\"\",num:\"\",coupon_type:\"多次优惠券\"}},handleCheckAllChange:function(e){var t=this;this.couponForm.game_ids=[],1==e?this.gameData.forEach(function(e){t.couponForm.game_ids.push(e.game_id)}):this.couponForm.game_ids=[]},getGameIndex:function(){var e=this;this.gameIds=[],i[\"a\"].getGameIndex(this.token).then(function(t){e.gameData=t.data})},onSubmit:function(){var e=this;l[\"a\"].searchCoupon(this.formInline.site_id,this.formInline.game_id,this.token).then(function(t){e.tableData=t.data})},addCoupon:function(){var e=this,t=c[\"a\"].JsonData(this.couponForm);l[\"a\"].addCoupon(t,this.token).then(function(t){e.$message({message:t.data.log,type:\"success\"}),e.getCouponIndex(),e.closeDialog()}).catch(function(e){console.log(e)})},closeDialog:function(){this.dialogFormVisible=!1},deleteCoupon:function(e){var t=this;l[\"a\"].deleteCoupon(e,this.token).then(function(e){t.$message({message:e.data.log,type:\"success\"}),t.getCouponIndex()}).catch(function(e){console.log(e)})},changeCoupon:function(){var e=this;this.formInline.game_id=\"\",l[\"a\"].changeCoupon(this.formInline.site_id,this.token).then(function(t){e.gameData=t.data})},addChangeCoupon:function(){var e=this;this.couponForm.game_id=\"\",this.checked=!1,this.couponForm.game_ids=[],l[\"a\"].changeCoupon(this.couponForm.site_id,this.token).then(function(t){e.gameData=t.data})},changeCouponType:function(e){this.couponForm.code=\"\",this.couponForm.stime=\"\",this.couponForm.ltime=\"\",this.couponForm.num=\"\",this.isCouponHidden=\"一次性优惠券\"!=e},getCouponIndex:function(){var e=this;l[\"a\"].getCouponIndex(this.token).then(function(t){e.tableData=t.data})}},created:function(){this.getSiteIndex(),this.getGameIndex(),this.getCouponIndex(),this.couponForm.coupon_type=this.couponType[1]}},s=u,d=(o(\"4299\"),o(\"2877\")),m=Object(d[\"a\"])(s,n,a,!1,null,null,null);t[\"default\"]=m.exports},\"782e\":function(e,t,o){\"use strict\";o(\"456d\"),o(\"ac6a\");t[\"a\"]={JsonData:function(e){var t=new FormData;return Object.keys(e).forEach(function(o){t.append(\"data[\"+o+\"]\",e[o])}),t}}},9935:function(e,t,o){},b0b4:function(e,t,o){\"use strict\";o.d(t,\"a\",function(){return l});var n=o(\"85f2\"),a=o.n(n);function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),a()(e,n.key,n)}}function l(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}},c540:function(e,t,o){\"use strict\";var n=o(\"d225\"),a=o(\"b0b4\"),i=o(\"b775\"),l=function(){function e(){Object(n[\"a\"])(this,e)}return Object(a[\"a\"])(e,[{key:\"getCouponIndex\",value:function(e){return Object(i[\"a\"])({url:\"/coupon/index\",method:\"get\",params:{token:e}})}},{key:\"searchCoupon\",value:function(e,t,o){return Object(i[\"a\"])({url:\"/coupon/index\",method:\"get\",params:{site_id:e,game_id:t,token:o}})}},{key:\"changeCoupon\",value:function(e,t){return Object(i[\"a\"])({url:\"/coupon/change_site\",method:\"get\",params:{site_id:e,token:t}})}},{key:\"addCoupon\",value:function(e,t){return Object(i[\"a\"])({url:\"/coupon/create?token=\".concat(t),method:\"post\",data:e})}},{key:\"deleteCoupon\",value:function(e,t){return Object(i[\"a\"])({url:\"/coupon/delete\",method:\"get\",params:{coupon_id:e,token:t}})}}]),e}();t[\"a\"]=new l},d225:function(e,t,o){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}o.d(t,\"a\",function(){return n})},e2da:function(e,t,o){\"use strict\";var n=o(\"d225\"),a=o(\"b0b4\"),i=o(\"b775\"),l=function(){function e(){Object(n[\"a\"])(this,e)}return Object(a[\"a\"])(e,[{key:\"getRoleIndex\",value:function(e){return Object(i[\"a\"])({url:\"/role/index\",method:\"get\",params:{token:e}})}},{key:\"createRole\",value:function(e,t){return Object(i[\"a\"])({url:\"/role/create?token=\".concat(t),method:\"post\",data:e})}},{key:\"deleteRole\",value:function(e,t){return Object(i[\"a\"])({url:\"/role/delete\",method:\"get\",params:{role_id:e,token:t}})}},{key:\"getAdminIndex\",value:function(e,t){return Object(i[\"a\"])({url:\"/admin/index\",method:\"get\",params:{role_id:e,token:t}})}},{key:\"createPerson\",value:function(e,t){return Object(i[\"a\"])({url:\"/admin/create?token=\".concat(t),method:\"post\",data:e})}},{key:\"modifyPerson\",value:function(e,t,o){return Object(i[\"a\"])({url:\"/admin/edit?token=\".concat(t,\"&admin_id=\").concat(o),method:\"post\",data:e})}},{key:\"deletePerson\",value:function(e,t){return Object(i[\"a\"])({url:\"admin/delete\",method:\"get\",params:{admin_id:e,token:t}})}},{key:\"searchPeople\",value:function(e,t){return Object(i[\"a\"])({url:\"/admin/index?token=\".concat(t),method:\"post\",data:e})}},{key:\"getSiteIndex\",value:function(e){return Object(i[\"a\"])({url:\"/site/index\",method:\"get\",params:{token:e}})}},{key:\"createSite\",value:function(e,t){return Object(i[\"a\"])({url:\"/site/create?token=\".concat(t),method:\"post\",data:e})}},{key:\"editSite\",value:function(e,t,o){return Object(i[\"a\"])({url:\"/site/edit?site_id=\".concat(t,\"&token=\").concat(o),method:\"post\",data:e})}},{key:\"deleteSite\",value:function(e,t){return Object(i[\"a\"])({url:\"/site/delete\",method:\"get\",params:{site_id:e,token:t}})}},{key:\"getCountryIndex\",value:function(e){return Object(i[\"a\"])({url:\"/country/index\",method:\"get\",params:{token:e}})}},{key:\"createCountry\",value:function(e,t){return Object(i[\"a\"])({url:\"/country/create?token=\".concat(t),method:\"post\",data:e})}},{key:\"installCountry\",value:function(e){return Object(i[\"a\"])({url:\"/country/install\",method:\"get\",params:{token:e}})}},{key:\"editCountry\",value:function(e,t,o){return Object(i[\"a\"])({url:\"/country/edit?country_id=\".concat(t,\"&token=\").concat(o),method:\"post\",data:e})}},{key:\"deleteCountry\",value:function(e,t){return Object(i[\"a\"])({url:\"/country/delete\",method:\"get\",params:{country_id:e,token:t}})}},{key:\"getGameIndex\",value:function(e){return Object(i[\"a\"])({url:\"/game/index\",method:\"get\",params:{token:e}})}},{key:\"createGame\",value:function(e,t){return Object(i[\"a\"])({url:\"/game/create?token=\".concat(t),method:\"post\",data:e})}},{key:\"editGame\",value:function(e,t,o){return Object(i[\"a\"])({url:\"/game/edit?game_id=\".concat(t,\"&token=\").concat(o),method:\"post\",data:e})}},{key:\"getGameConfigIndex\",value:function(e,t){return Object(i[\"a\"])({url:\"/sitegame/edit\",method:\"get\",params:{site_id:e,token:t}})}},{key:\"saveGameConfigIndex\",value:function(e,t,o){return Object(i[\"a\"])({url:\"/sitegame/edit?site_id=\".concat(t,\"&token=\").concat(o),method:\"post\",data:e})}}]),e}();t[\"a\"]=new l}}]);","extractedComments":[]}
{"remainingRequest":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\thread-loader\\dist\\cjs.js!E:\\vueProject\\admin\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js!E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\vueProject\\admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vueProject\\admin\\vue-element-admin\\src\\views\\system-manager\\game-server.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vueProject\\admin\\vue-element-admin\\src\\views\\system-manager\\game-server.vue","mtime":1574226537564},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vueProject\\admin\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SystemManager from '@/api/system-manager';\nimport { getToken } from '@/utils/auth';\nimport toJsonData from '@/api/jsonformdata';\nexport default {\n  name: 'game-server',\n  data: function data() {\n    return {\n      dialogType: 'add',\n      tableData: [],\n      token: getToken(),\n      dialogEditFormVisible: false,\n      formLabelWidth: '120px',\n      optionVisible: false,\n      editGameForm: {\n        title: '',\n        sku_game: '',\n        is_hidden: false\n      },\n      gameId: '',\n      left: '0px',\n      top: '0px',\n      isHidden: [{\n        'is_hidden': '禁用此游戏'\n      }]\n    };\n  },\n  methods: {\n    handleAddSite: function handleAddSite() {\n      this.dialogType = 'add';\n      this.dialogEditFormVisible = true;\n    },\n    handleEditGame: function handleEditGame() {\n      this.dialogType = 'edit';\n      this.dialogEditFormVisible = true;\n    },\n    rightClick: function rightClick(row, column, e) {\n      e.preventDefault();\n      this.publicMenu(e);\n      var isHiddenValue = false;\n\n      if (row.is_hidden === '0') {\n        isHiddenValue = true;\n      } else {\n        isHiddenValue = false;\n      }\n\n      this.gameId = row.game_id;\n      this.editGameForm = {\n        title: row.title,\n        sku_game: row.sku_game,\n        is_hidden: isHiddenValue\n      };\n      this.optionVisible = true;\n    },\n    publicMenu: function publicMenu(e) {\n      var menuMinWidth = 105;\n      var offsetLeft = this.$el.getBoundingClientRect().left; // container margin left\n\n      var offsetWidth = this.$el.offsetWidth; // container width\n\n      var maxLeft = offsetWidth - menuMinWidth; // left boundary\n\n      var left = e.clientX - offsetLeft + 15; // 15: margin right\n\n      if (left > maxLeft) {\n        this.left = maxLeft;\n      } else {\n        this.left = left;\n      }\n\n      this.top = e.clientY - 80;\n    },\n    tableRowClassName: function tableRowClassName(_ref) {\n      var row = _ref.row,\n          rowIndex = _ref.rowIndex;\n\n      if (row.is_hidden === '0') {\n        return 'hidden_row';\n      } else {\n        return '';\n      }\n    },\n    createGame: function createGame() {\n      var _this = this;\n\n      var postData = toJsonData.JsonData(this.editGameForm);\n      var isAdd = this.dialogType === 'add';\n\n      if (isAdd) {\n        SystemManager.createGame(postData, this.token).then(function (data) {\n          _this.$message({\n            message: data.data.log,\n            type: 'success'\n          });\n\n          _this.getGameIndex();\n\n          _this.closeDialog();\n        });\n      } else {\n        SystemManager.editGame(postData, this.gameId, this.token).then(function (data) {\n          _this.$message({\n            message: data.data.log,\n            type: 'success'\n          });\n\n          _this.getGameIndex();\n\n          _this.closeDialog();\n        });\n      }\n\n      this.editGameForm = {\n        title: '',\n        sku_game: '',\n        is_hidden: false\n      };\n    },\n    getGameIndex: function getGameIndex() {\n      var _this2 = this;\n\n      SystemManager.getGameIndex(this.token).then(function (data) {\n        _this2.tableData = data.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    closeDialog: function closeDialog() {\n      this.dialogEditFormVisible = false;\n    },\n    closeMenu: function closeMenu() {\n      this.optionVisible = false;\n    }\n  },\n  created: function created() {\n    this.getGameIndex();\n  },\n  watch: {\n    optionVisible: function optionVisible(value) {\n      if (value) {\n        document.body.addEventListener('click', this.closeMenu);\n      } else {\n        document.body.removeEventListener('click', this.closeMenu);\n      }\n    }\n  }\n};",null]}